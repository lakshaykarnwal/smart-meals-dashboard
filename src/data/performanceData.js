// src/data/performanceData.js

// Import the helper function from the utility file
import { parsePeriodDate } from '../utils/dateUtils';

// Simulated detailed meals served over time, broken down by vendor
// THIS DATA IS NOW COMPLETE BASED ON YOUR PROVIDED SPREADSHEET PDFs.
const detailedMealsServedOverTime = [
  { period: 'Sep 27th', vendor: 'Koi Sushi', meals: 60 },
  { period: 'Sep 27th', vendor: 'Fusion Express', meals: 80 },
  { period: 'Sep 27th', vendor: 'J\'s Cafe', meals: 30 },
  { period: 'Sep 27th', vendor: 'Well Pub', meals: 40 },
  { period: 'Oct 11th', vendor: 'Koi Sushi', meals: 90 },
  { period: 'Oct 11th', vendor: 'Fusion Express', meals: 120 },
  { period: 'Oct 11th', vendor: 'J\'s Cafe', meals: 40 },
  { period: 'Oct 11th', vendor: 'Well Pub', meals: 50 },
  { period: 'Oct 25th', vendor: 'Koi Sushi', meals: 80 },
  { period: 'Oct 25th', vendor: 'Fusion Express', meals: 120 },
  { period: 'Oct 25th', vendor: 'J\'s Cafe', meals: 47 },
  { period: 'Oct 25th', vendor: 'Well Pub', meals: 50 },
  { period: 'Nov 1st', vendor: 'Koi Sushi', meals: 90 },
  { period: 'Nov 1st', vendor: 'Fusion Express', meals: 120 },
  { period: 'Nov 1st', vendor: 'J\'s Cafe', meals: 40 },
  { period: 'Nov 1st', vendor: 'Well Pub', meals: 50 },
  { period: 'Nov 8th', vendor: 'Koi Sushi', meals: 90 },
  { period: 'Nov 8th', vendor: 'Fusion Express', meals: 130 },
  { period: 'Nov 8th', vendor: 'J\'s Cafe', meals: 50 },
  { period: 'Nov 8th', vendor: 'Well Pub', meals: 50 },
  { period: 'Nov 15th', vendor: 'Koi Sushi', meals: 0 },
  { period: 'Nov 15th', vendor: 'Fusion Express', meals: 0 },
  { period: 'Nov 15th', vendor: 'J\'s Cafe', meals: 0 },
  { period: 'Nov 15th', vendor: 'Well Pub', meals: 0 },
  { period: 'Nov 22nd', vendor: 'Koi Sushi', meals: 90 },
  { period: 'Nov 22nd', vendor: 'Fusion Express', meals: 130 },
  { period: 'Nov 22nd', vendor: 'J\'s Cafe', meals: 50 },
  { period: 'Nov 22nd', vendor: 'Well Pub', meals: 50 },
  { period: 'Nov 29th', vendor: 'Koi Sushi', meals: 90 },
  { period: 'Nov 29th', vendor: 'Fusion Express', meals: 130 },
  { period: 'Nov 29th', vendor: 'J\'s Cafe', meals: 50 },
  { period: 'Nov 29th', vendor: 'Well Pub', meals: 50 },
  { period: 'Dec 5th', vendor: 'Koi Sushi', meals: 50 },
  { period: 'Dec 5th', vendor: 'Fusion Express', meals: 80 },
  { period: 'Dec 5th', vendor: 'J\'s Cafe', meals: 30 },
  { period: 'Dec 5th', vendor: 'Well Pub', meals: 40 },
  { period: 'Dec 7th', vendor: 'Koi Sushi', meals: 50 },
  { period: 'Dec 7th', vendor: 'Fusion Express', meals: 80 },
  { period: 'Dec 7th', vendor: 'J\'s Cafe', meals: 30 },
  { period: 'Dec 7th', vendor: 'Well Pub', meals: 40 },
  { period: 'Dec 12th', vendor: 'Koi Sushi', meals: 50 },
  { period: 'Dec 12th', vendor: 'Fusion Express', meals: 80 },
  { period: 'Dec 12th', vendor: 'J\'s Cafe', meals: 30 },
  { period: 'Dec 12th', vendor: 'Well Pub', meals: 40 },
  { period: 'Dec 14th', vendor: 'Koi Sushi', meals: 50 },
  { period: 'Dec 14th', vendor: 'Fusion Express', meals: 80 },
  { period: 'Dec 14th', vendor: 'J\'s Cafe', meals: 30 },
  { period: 'Dec 14th', vendor: 'Well Pub', meals: 40 },
  { period: 'Jan 23rd', vendor: 'Koi Sushi', meals: 50 },
  { period: 'Jan 23rd', vendor: 'Fusion Express', meals: 70 },
  { period: 'Jan 23rd', vendor: 'J\'s Cafe', meals: 40 },
  { period: 'Jan 23rd', vendor: 'Well Pub', meals: 42 },
  { period: 'Jan 25th', vendor: 'Koi Sushi', meals: 60 },
  { period: 'Jan 25th', vendor: 'Fusion Express', meals: 90 },
  { period: 'Jan 25th', vendor: 'J\'s Cafe', meals: 47 },
  { period: 'Jan 25th', vendor: 'Well Pub', meals: 40 },
  { period: 'Jan 30th', vendor: 'Koi Sushi', meals: 60 },
  { period: 'Jan 30th', vendor: 'J\'s Cafe', meals: 54 },
  { period: 'Jan 30th', vendor: 'Well Pub', meals: 50 },
  { period: 'February 1st', vendor: 'Koi Sushi', meals: 50 },
  { period: 'February 1st', vendor: 'J\'s Cafe', meals: 50 },
  { period: 'February 1st', vendor: 'Well Pub', meals: 60 },
  { period: 'February 6th', vendor: 'Koi Sushi', meals: 50 },
  { period: 'February 6th', vendor: 'J\'s Cafe', meals: 50 },
  { period: 'February 6th', vendor: 'Well Pub', meals: 60 },
  { period: 'February 8th', vendor: 'Koi Sushi', meals: 50 },
  { period: 'February 8th', vendor: 'J\'s Cafe', meals: 50 },
  { period: 'February 8th', vendor: 'Well Pub', meals: 60 },
  { period: 'February 13th', vendor: 'Koi Sushi', meals: 70 },
  { period: 'February 13th', vendor: 'Fusion Express', meals: 90 },
  { period: 'February 13th', vendor: 'J\'s Cafe', meals: 40 },
  { period: 'February 13th', vendor: 'Well Pub', meals: 40 },
  { period: 'Feb 15th', vendor: 'Koi Sushi', meals: 70 },
  { period: 'Feb 15th', vendor: 'Fusion Express', meals: 90 },
  { period: 'Feb 15th', vendor: 'J\'s Cafe', meals: 40 },
  { period: 'Feb 15th', vendor: 'Well Pub', meals: 40 },
  { period: 'Feb 19th', vendor: 'Koi Sushi', meals: 0 },
  { period: 'Feb 19th', vendor: 'Fusion Express', meals: 0 },
  { period: 'Feb 19th', vendor: 'J\'s Cafe', meals: 0 },
  { period: 'Feb 19th', vendor: 'Well Pub', meals: 0 },
  { period: 'Feb 22nd', vendor: 'Koi Sushi', meals: 0 },
  { period: 'Feb 22nd', vendor: 'Fusion Express', meals: 0 },
  { period: 'Feb 22nd', vendor: 'J\'s Cafe', meals: 0 },
  { period: 'Feb 22nd', vendor: 'Well Pub', meals: 0 },
  { period: 'Feb 27th', vendor: 'Koi Sushi', meals: 70 },
  { period: 'Feb 27th', vendor: 'Fusion Express', meals: 90 },
  { period: 'Feb 27th', vendor: 'J\'s Cafe', meals: 40 },
  { period: 'Feb 27th', vendor: 'Well Pub', meals: 40 },
  { period: 'February 29th', vendor: 'Koi Sushi', meals: 70 },
  { period: 'February 29th', vendor: 'Fusion Express', meals: 90 },
  { period: 'February 29th', vendor: 'J\'s Cafe', meals: 40 },
  { period: 'February 29th', vendor: 'Well Pub', meals: 40 },
  { period: 'March 5th', vendor: 'Koi Sushi', meals: 70 },
  { period: 'March 5th', vendor: 'Fusion Express', meals: 90 },
  { period: 'March 5th', vendor: 'J\'s Cafe', meals: 40 },
  { period: 'March 5th', vendor: 'Well Pub', meals: 40 },
  { period: 'March 7th', vendor: 'Koi Sushi', meals: 70 },
  { period: 'March 7th', vendor: 'Fusion Express', meals: 90 },
  { period: 'March 7th', vendor: 'J\'s Cafe', meals: 40 },
  { period: 'March 7th', vendor: 'Well Pub', meals: 40 },
  { period: 'March 12th', vendor: 'Koi Sushi', meals: 70 },
  { period: 'March 12th', vendor: 'Fusion Express', meals: 90 },
  { period: 'March 12th', vendor: 'J\'s Cafe', meals: 40 },
  { period: 'March 12th', vendor: 'Well Pub', meals: 40 },
  { period: 'March 14th', vendor: 'Koi Sushi', meals: 70 },
  { period: 'March 14th', vendor: 'Fusion Express', meals: 90 },
  { period: 'March 14th', vendor: 'J\'s Cafe', meals: 40 },
  { period: 'March 14th', vendor: 'Well Pub', meals: 40 },
  { period: 'March 19th', vendor: 'Koi Sushi', meals: 70 },
  { period: 'March 19th', vendor: 'Fusion Express', meals: 90 },
  { period: 'March 19th', vendor: 'J\'s Cafe', meals: 40 },
  { period: 'March 19th', vendor: 'Well Pub', meals: 40 },
  { period: 'March 21st', vendor: 'Koi Sushi', meals: 70 },
  { period: 'March 21st', vendor: 'Fusion Express', meals: 90 },
  { period: 'March 21st', vendor: 'J\'s Cafe', meals: 40 },
  { period: 'March 21st', vendor: 'Well Pub', meals: 40 },
  { period: 'March 26th', vendor: 'Koi Sushi', meals: 70 },
  { period: 'March 26th', vendor: 'Fusion Express', meals: 90 },
  { period: 'March 26th', vendor: 'J\'s Cafe', meals: 40 },
  { period: 'March 26th', vendor: 'Well Pub', meals: 40 },
  { period: 'March 28th', vendor: 'Koi Sushi', meals: 70 },
  { period: 'March 28th', vendor: 'Fusion Express', meals: 90 },
  { period: 'March 28th', vendor: 'J\'s Cafe', meals: 40 },
  { period: 'March 28th', vendor: 'Well Pub', meals: 40 },
  { period: 'April 2nd', vendor: 'Koi Sushi', meals: 70 },
  { period: 'April 2nd', vendor: 'Fusion Express', meals: 90 },
  { period: 'April 2nd', vendor: 'J\'s Cafe', meals: 40 },
  { period: 'April 2nd', vendor: 'Well Pub', meals: 40 },
  { period: 'April 4th', vendor: 'Koi Sushi', meals: 70 },
  { period: 'April 4th', vendor: 'Fusion Express', meals: 90 },
  { period: 'April 4th', vendor: 'J\'s Cafe', meals: 40 },
  { period: 'April 4th', vendor: 'Well Pub', meals: 40 },
  { period: 'April 9th', vendor: 'Koi Sushi', meals: 70 },
  { period: 'April 9th', vendor: 'Fusion Express', meals: 90 },
  { period: 'April 9th', vendor: 'J\'s Cafe', meals: 40 },
  { period: 'April 9th', vendor: 'Well Pub', meals: 40 },
  { period: 'April 11th', vendor: 'Koi Sushi', meals: 70 },
  { period: 'April 11th', vendor: 'Fusion Express', meals: 90 },
  { period: 'April 11th', vendor: 'J\'s Cafe', meals: 40 },
  { period: 'April 11th', vendor: 'Well Pub', meals: 40 },
  { period: 'April 16th', vendor: 'Koi Sushi', meals: 70 },
  { period: 'April 16th', vendor: 'Fusion Express', meals: 90 },
  { period: 'April 16th', vendor: 'J\'s Cafe', meals: 40 },
  { period: 'April 16th', vendor: 'Well Pub', meals: 40 },
  { period: 'April 18th', vendor: 'Koi Sushi', meals: 70 },
  { period: 'April 18th', vendor: 'Fusion Express', meals: 90 },
  { period: 'April 18th', vendor: 'J\'s Cafe', meals: 40 },
  { period: 'April 18th', vendor: 'Well Pub', meals: 40 },
  { period: 'April 23rd', vendor: 'Koi Sushi', meals: 70 },
  { period: 'April 23rd', vendor: 'Fusion Express', meals: 90 },
  { period: 'April 23rd', vendor: 'J\'s Cafe', meals: 40 },
  { period: 'April 23rd', vendor: 'Well Pub', meals: 40 },
  { period: 'April 25th', vendor: 'Koi Sushi', meals: 70 },
  { period: 'April 25th', vendor: 'Fusion Express', meals: 90 },
  { period: 'April 25th', vendor: 'J\'s Cafe', meals: 40 },
  { period: 'April 25th', vendor: 'Well Pub', meals: 40 },
  { period: 'April 30th', vendor: 'Koi Sushi', meals: 70 },
  { period: 'April 30th', vendor: 'Fusion Express', meals: 90 },
  { period: 'April 30th', vendor: 'J\'s Cafe', meals: 40 },
  { period: 'April 30th', vendor: 'Well Pub', meals: 40 },
];

// Keep overall satisfaction scores from the survey
const overallSatisfaction = {
  Healthy: 81,
  Filling: 70,
  Tasty: 72,
  Affordable: 90,
  PreventedSkipping: 65,
};

// Keep simulated satisfaction over time for overall trend (not per-vendor)
const satisfactionOverTime = [
   { period: 'Oct 25th', Healthy: 80, Filling: 68, Tasty: 70, Affordable: 88, PreventedSkipping: 63 },
   { period: 'Nov 29th', Healthy: 81, Filling: 70, Tasty: 71, Affordable: 90, PreventedSkipping: 65 },
   { period: 'Feb 29th', Healthy: 82, Filling: 71, Tasty: 73, Affordable: 91, PreventedSkipping: 66 },
   { period: 'April 18th', Healthy: 81, Filling: 70, Tasty: 72, Affordable: 90, PreventedSkipping: 65 },
];


const performanceData = {
  // Calculate total meals served by summing up the detailed data
  totalMealsServed: detailedMealsServedOverTime.reduce((sum, item) => sum + item.meals, 0),
  overallSatisfaction: overallSatisfaction,
  // Provide the detailed data for filtering in App.js
  detailedMealsServedOverTime: detailedMealsServedOverTime,
   // Summarize mealsServedOverTime for the chart when no vendor filter is active or after vendor filtering
   // This array is used by App.js to get the list of individual dates for the filter dropdown
  mealsServedOverTime: detailedMealsServedOverTime.reduce((acc, item) => {
      const existingPeriod = acc.find(p => p.period === item.period);
      if (existingPeriod) {
          existingPeriod.meals += item.meals;
      } else {
          acc.push({ period: item.period, meals: item.meals });
      }
      return acc;
  }, []).sort((a, b) => parsePeriodDate(a.period) - parsePeriodDate(b.period)), // Sort by date


  satisfactionOverTime: satisfactionOverTime, // Keep this for overall trend (not per-vendor)
};

export default performanceData;